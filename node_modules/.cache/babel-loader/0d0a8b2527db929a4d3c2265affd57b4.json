{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/usuario/Desktop/portfolio-cliente-main/src/components/Proyectos/ProyectoEdicion.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Select from \"react-select\";\nimport Sidebar from \"../Layout/Sidebar\";\nimport Topbar from \"../Layout/Topbar\";\nimport Rightbar from \"../Layout/Rightbar\";\nimport skillsData from \"../../data/skills.json\";\nexport default function ProyectoEdicion(props) {\n  _s();\n\n  const [proyecto, guardarProyecto] = useState({});\n  const {\n    name,\n    productPicture,\n    category,\n    description,\n    linkto,\n    skill,\n    github,\n    video,\n    tags,\n    end,\n    begin\n  } = proyecto;\n  const [skills, getSkills] = useState(skillsData);\n  const [categories, guardarCategories] = useState([]);\n  const id = props.match.params.proyecto;\n  let history = useHistory();\n  useEffect(() => {\n    const getCategories = async () => {\n      try {\n        const respuestaCat = await clienteAxios.get(\"/categories\");\n        guardarCategories(respuestaCat.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    getCategories();\n\n    const obtenerProyecto = async () => {\n      try {\n        const respuesta = await clienteAxios.get(`/products/${id}`);\n        guardarProyecto(respuesta.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    obtenerProyecto();\n\n    const getFeatures = async () => {\n      try {\n        const resultado = await clienteAxios.get(\"/skills\");\n        getSkills(resultado.data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    getFeatures();\n  }, []);\n  const newOne = skills.map((s, i) => ({\n    value: s.skills,\n    label: s.skills\n  }));\n  const [selectedValue, setSelectedValue] = useState([]);\n\n  const handleChange = e => {\n    setSelectedValue(Array.isArray(e) ? e.map(x => x.value) : []);\n  };\n\n  const onChange = e => {\n    const {\n      name,\n      value,\n      files,\n      file\n    } = e.target;\n    guardarProyecto({ ...proyecto,\n      [name]: files ? files[0] : value\n    });\n    console.log(files && files[0]);\n    console.log(file);\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault(); // Cloudinary\n\n    const data = new FormData();\n    data.append(\"file\", proyecto.productPicture);\n    data.append(\"upload_preset\", \"portfolio-aitor\");\n    data.append(\"cloud_name\", \"aitorcloud\");\n    const respuesta = await fetch(\"https://api.cloudinary.com/v1_1/aitorcloud/image/upload\", {\n      method: \"post\",\n      body: data\n    });\n    console.log(respuesta);\n    const file = await respuesta.json();\n    console.log(file.secure_url);\n    const resultado = await clienteAxios.patch(`/products/${id}`, { ...proyecto,\n      skill: selectedValue,\n      productPicture: file.secure_url\n    });\n    history.push(`/category/${category}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-area\",\n      children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"middle-area\",\n      children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"middle-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"proyect-form-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"proyect-form\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"title-container\",\n              children: [\"Edit Project\", /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fas fa-project-diagram\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: onSubmit,\n              encType: \"multipart/form-data\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"text\",\n                  name: \"name\",\n                  placeholder: \"nombre\",\n                  value: name,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  class: \"custom-file-upload\",\n                  children: [\"Select File \", /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"far fa-file\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"line-form\",\n                    type: \"file\",\n                    name: \"productPicture\",\n                    id: \"productPicture\",\n                    placeholder: \"imagen\",\n                    onChange: onChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"line-form\",\n                  name: \"category\",\n                  onChange: onChange,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"Select...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 21\n                  }, this), categories.map(categorySelect => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: categorySelect.category,\n                    children: categorySelect.category\n                  }, categorySelect.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(Select, {\n                  isMulti: true,\n                  className: \"line-form-select\",\n                  options: newOne,\n                  value: newOne.filter(obj => selectedValue.includes(obj.value)),\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"text\",\n                  name: \"description\",\n                  placeholder: \"descripci\\xF3n\",\n                  value: description,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"text\",\n                  name: \"linkto\",\n                  placeholder: \"link to\",\n                  value: linkto,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"text\",\n                  name: \"github\",\n                  placeholder: \"GitHub\",\n                  value: github,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"text\",\n                  name: \"video\",\n                  placeholder: \"video link\",\n                  value: video,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"date\",\n                  name: \"begin\",\n                  placeholder: \"incicio\",\n                  value: begin,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cajetin-form\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"line-form\",\n                  type: \"date\",\n                  name: \"end\",\n                  placeholder: \"finalizado\",\n                  value: end,\n                  onChange: onChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"form-button\",\n                type: \"submit\",\n                value: \"Subir Proyecto\",\n                children: \"Save Changes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right-area\",\n      children: /*#__PURE__*/_jsxDEV(Rightbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProyectoEdicion, \"Pge4+UKXvALV0HpwhYdubJumRNQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = ProyectoEdicion;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProyectoEdicion\");","map":{"version":3,"sources":["/Users/usuario/Desktop/portfolio-cliente-main/src/components/Proyectos/ProyectoEdicion.js"],"names":["React","useEffect","useContext","useState","useHistory","Select","Sidebar","Topbar","Rightbar","skillsData","ProyectoEdicion","props","proyecto","guardarProyecto","name","productPicture","category","description","linkto","skill","github","video","tags","end","begin","skills","getSkills","categories","guardarCategories","id","match","params","history","getCategories","respuestaCat","clienteAxios","get","data","error","console","log","obtenerProyecto","respuesta","getFeatures","resultado","newOne","map","s","i","value","label","selectedValue","setSelectedValue","handleChange","e","Array","isArray","x","onChange","files","file","target","onSubmit","preventDefault","FormData","append","fetch","method","body","json","secure_url","patch","push","categorySelect","filter","obj","includes"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Select from \"react-select\";\r\n\r\nimport Sidebar from \"../Layout/Sidebar\";\r\nimport Topbar from \"../Layout/Topbar\";\r\nimport Rightbar from \"../Layout/Rightbar\";\r\n\r\nimport skillsData from \"../../data/skills.json\";\r\n\r\nexport default function ProyectoEdicion(props) {\r\n  const [proyecto, guardarProyecto] = useState({});\r\n\r\n  const {\r\n    name,\r\n    productPicture,\r\n    category,\r\n    description,\r\n    linkto,\r\n    skill,\r\n    github,\r\n    video,\r\n    tags,\r\n    end,\r\n    begin,\r\n  } = proyecto;\r\n\r\n  const [skills, getSkills] = useState(skillsData);\r\n\r\n  const [categories, guardarCategories] = useState([]);\r\n\r\n  const id = props.match.params.proyecto;\r\n\r\n  let history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const getCategories = async () => {\r\n      try {\r\n        const respuestaCat = await clienteAxios.get(\"/categories\");\r\n        guardarCategories(respuestaCat.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    getCategories();\r\n\r\n    const obtenerProyecto = async () => {\r\n      try {\r\n        const respuesta = await clienteAxios.get(`/products/${id}`);\r\n        guardarProyecto(respuesta.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    obtenerProyecto();\r\n\r\n    const getFeatures = async () => {\r\n      try {\r\n        const resultado = await clienteAxios.get(\"/skills\");\r\n        getSkills(resultado.data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n    getFeatures();\r\n  }, []);\r\n\r\n  const newOne = skills.map((s, i) => ({ value: s.skills, label: s.skills }));\r\n\r\n  const [selectedValue, setSelectedValue] = useState([]);\r\n\r\n  const handleChange = (e) => {\r\n    setSelectedValue(Array.isArray(e) ? e.map((x) => x.value) : []);\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const { name, value, files, file } = e.target;\r\n    guardarProyecto({\r\n      ...proyecto,\r\n      [name]: files ? files[0] : value,\r\n    });\r\n    console.log(files && files[0]);\r\n    console.log(file);\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Cloudinary\r\n    const data = new FormData();\r\n    data.append(\"file\", proyecto.productPicture);\r\n    data.append(\"upload_preset\", \"portfolio-aitor\");\r\n    data.append(\"cloud_name\", \"aitorcloud\");\r\n    const respuesta = await fetch(\r\n      \"https://api.cloudinary.com/v1_1/aitorcloud/image/upload\",\r\n      {\r\n        method: \"post\",\r\n        body: data,\r\n      }\r\n    );\r\n    console.log(respuesta);\r\n    const file = await respuesta.json();\r\n\r\n    console.log(file.secure_url);\r\n\r\n    const resultado = await clienteAxios.patch(`/products/${id}`, {\r\n      ...proyecto,\r\n      skill: selectedValue,\r\n      productPicture: file.secure_url,\r\n    });\r\n    history.push(`/category/${category}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-container\">\r\n      <div className=\"left-area\">\r\n        <Sidebar />\r\n      </div>\r\n\r\n      <div className=\"middle-area\">\r\n        <Topbar />\r\n\r\n        <div className=\"middle-container\">\r\n          <div className=\"proyect-form-container\">\r\n            <div className=\"proyect-form\">\r\n              <div className=\"title-container\">\r\n                Edit Project<i class=\"fas fa-project-diagram\"></i>\r\n              </div>\r\n\r\n              <form onSubmit={onSubmit} encType=\"multipart/form-data\">\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    placeholder=\"nombre\"\r\n                    value={name}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <label class=\"custom-file-upload\">\r\n                    Select File <i class=\"far fa-file\"></i>\r\n                    <input\r\n                      className=\"line-form\"\r\n                      type=\"file\"\r\n                      name=\"productPicture\"\r\n                      id=\"productPicture\"\r\n                      placeholder=\"imagen\"\r\n                      onChange={onChange}\r\n                    />\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <select\r\n                    className=\"line-form\"\r\n                    name=\"category\"\r\n                    onChange={onChange}\r\n                  >\r\n                    <option>Select...</option>\r\n                    {categories.map((categorySelect) => (\r\n                      <option\r\n                        key={categorySelect.id}\r\n                        value={categorySelect.category}\r\n                      >\r\n                        {categorySelect.category}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <Select\r\n                    isMulti\r\n                    className=\"line-form-select\"\r\n                    options={newOne}\r\n                    value={newOne.filter((obj) =>\r\n                      selectedValue.includes(obj.value)\r\n                    )}\r\n                    onChange={handleChange}\r\n                  ></Select>\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    placeholder=\"descripción\"\r\n                    value={description}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"text\"\r\n                    name=\"linkto\"\r\n                    placeholder=\"link to\"\r\n                    value={linkto}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"text\"\r\n                    name=\"github\"\r\n                    placeholder=\"GitHub\"\r\n                    value={github}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"text\"\r\n                    name=\"video\"\r\n                    placeholder=\"video link\"\r\n                    value={video}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"date\"\r\n                    name=\"begin\"\r\n                    placeholder=\"incicio\"\r\n                    value={begin}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"cajetin-form\">\r\n                  <input\r\n                    className=\"line-form\"\r\n                    type=\"date\"\r\n                    name=\"end\"\r\n                    placeholder=\"finalizado\"\r\n                    value={end}\r\n                    onChange={onChange}\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  className=\"form-button\"\r\n                  type=\"submit\"\r\n                  value=\"Subir Proyecto\"\r\n                >\r\n                  Save Changes\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"right-area\">\r\n        <Rightbar />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}