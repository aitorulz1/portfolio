{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/usuario/Desktop/portfolio-cliente-main/src/components/Proyectos/ProyectoNuevo.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect, useContext } from \"react\";\nimport clienteAxios from \"../../service/axios\";\nimport proyectoContext from \"../../context/proyectos/proyectoContext\";\nimport Select from \"react-select\";\nimport \"./css/ProyectoNuevo.css\";\nexport default function ProyectoNuevo(props) {\n  _s();\n\n  const proyectosContext = useContext(proyectoContext);\n  const {\n    agregarProyecto\n  } = proyectosContext;\n  const [proyecto, guardarProyecto] = useState({\n    name: \"\",\n    productPicture: \"\",\n    category: \"\",\n    description: \"\",\n    linkto: \"\",\n    github: \"\",\n    video: \"\",\n    skill: [],\n    begin: \"\",\n    end: \"\"\n  });\n  const {\n    name,\n    productPicture,\n    category,\n    description,\n    linkto,\n    github,\n    video,\n    skill,\n    begin,\n    end\n  } = proyecto;\n  const [skills, getSkills] = useState([]);\n  const [error, guardarError] = useState(false);\n  const [categorias, guardarCategorias] = useState([]); // useEffect(() => {\n  //   const getData = async () => {\n  //     try {\n  //       const respuesta = await clienteAxios.get(\"/categories\");\n  //       guardarCategorias(respuesta.data);\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   };\n  //   getData();\n  //   const getFeatures = async () => {\n  //     try {\n  //       const resultado = await clienteAxios.get(\"/skills\");\n  //       getSkills(resultado.data);\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   };\n  //   getFeatures();\n  // }, []);\n\n  const newOne = skills.map((s, i) => ({\n    value: s.skills,\n    label: s.skills\n  }));\n  const [selectedValue, setSelectedValue] = useState([]);\n\n  const handleChange = e => {\n    setSelectedValue(Array.isArray(e) ? e.map(x => x.value) : []);\n  };\n\n  const onChange = e => {\n    const {\n      name,\n      value,\n      files,\n      file\n    } = e.target;\n    guardarProyecto({ ...proyecto,\n      [name]: files ? files[0] : value\n    });\n    console.log(files && files[0]);\n    console.log(file);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (name.trim() === \"\" || category.trim() === \"\" || description.trim() === \"\" || begin.trim() === \"\" || end.trim() === \"\") {\n      guardarError(true);\n      setTimeout(() => {\n        guardarError(false);\n      }, 3000);\n      return;\n    }\n\n    guardarError(false); // Cloudinary\n\n    const data = new FormData();\n    data.append(\"file\", proyecto.productPicture);\n    data.append(\"upload_preset\", \"portfolio-aitor\");\n    data.append(\"cloud_name\", \"aitorcloud\");\n    fetch(\"https://api.cloudinary.com/v1_1/aitorcloud/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(file => {\n      console.log(file.secure_url);\n      console.log(file); // Agrego el producto\n\n      agregarProyecto({\n        name,\n        productPicture: file.secure_url,\n        category,\n        description,\n        linkto,\n        github,\n        skill: selectedValue,\n        video,\n        begin,\n        end\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    guardarProyecto({\n      name: \"\",\n      productPicture: \"\",\n      category: \"\",\n      description: \"\",\n      begin: \"\",\n      linto: \"\",\n      github: \"\",\n      skill: [],\n      video: \"\",\n      end: \"\"\n    });\n    console.log(proyecto);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"proyect-form-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"proyect-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-container\",\n        children: [\"New Project\", /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"fas fa-project-diagram\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        encType: \"multipart/form-data\",\n        children: [error ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-red\",\n          children: \"Completa todos los campos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"text\",\n            name: \"name\",\n            placeholder: \"nombre\",\n            value: name,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"custom-file-upload\",\n            children: [\"Select File \", /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"far fa-file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"line-form\",\n              type: \"file\",\n              name: \"productPicture\",\n              id: \"productPicture\",\n              placeholder: \"imagen\",\n              onChange: onChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"line-form\",\n            name: \"category\",\n            onChange: onChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"select\",\n              children: \"Select...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this), categorias.map(categorySelect => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: categorySelect.category,\n              children: categorySelect.category\n            }, categorySelect.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            isMulti: true,\n            className: \"line-form-select\",\n            options: newOne,\n            value: newOne.filter(obj => selectedValue.includes(obj.value)),\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"text\",\n            name: \"description\",\n            placeholder: \"descripci\\xF3n\",\n            value: description,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"text\",\n            name: \"linkto\",\n            placeholder: \"linkto\",\n            value: linkto,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"text\",\n            name: \"github\",\n            placeholder: \"github\",\n            value: github,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"text\",\n            name: \"video\",\n            placeholder: \"video\",\n            value: video,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"date\",\n            name: \"begin\",\n            placeholder: \"incicio\",\n            value: begin,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cajetin-form\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"line-form\",\n            type: \"date\",\n            name: \"end\",\n            placeholder: \"finalizado\",\n            value: end,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"form-button\",\n          type: \"submit\",\n          value: \"Subir Proyecto\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fas fa-arrow-circle-up\",\n            alt: \"upload project\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProyectoNuevo, \"VSwERtRMwOFqCaPaQIrJS+jV8/M=\");\n\n_c = ProyectoNuevo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProyectoNuevo\");","map":{"version":3,"sources":["/Users/usuario/Desktop/portfolio-cliente-main/src/components/Proyectos/ProyectoNuevo.js"],"names":["React","Fragment","useState","useEffect","useContext","clienteAxios","proyectoContext","Select","ProyectoNuevo","props","proyectosContext","agregarProyecto","proyecto","guardarProyecto","name","productPicture","category","description","linkto","github","video","skill","begin","end","skills","getSkills","error","guardarError","categorias","guardarCategorias","newOne","map","s","i","value","label","selectedValue","setSelectedValue","handleChange","e","Array","isArray","x","onChange","files","file","target","console","log","onSubmit","preventDefault","trim","setTimeout","data","FormData","append","fetch","method","body","then","res","json","secure_url","catch","err","linto","categorySelect","id","filter","obj","includes"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, useContext } from \"react\";\r\nimport clienteAxios from \"../../service/axios\";\r\n\r\nimport proyectoContext from \"../../context/proyectos/proyectoContext\";\r\nimport Select from \"react-select\";\r\n\r\nimport \"./css/ProyectoNuevo.css\";\r\n\r\nexport default function ProyectoNuevo(props) {\r\n  const proyectosContext = useContext(proyectoContext);\r\n  const { agregarProyecto } = proyectosContext;\r\n\r\n  const [proyecto, guardarProyecto] = useState({\r\n    name: \"\",\r\n    productPicture: \"\",\r\n    category: \"\",\r\n    description: \"\",\r\n    linkto: \"\",\r\n    github: \"\",\r\n    video: \"\",\r\n    skill: [],\r\n    begin: \"\",\r\n    end: \"\",\r\n  });\r\n\r\n  const {\r\n    name,\r\n    productPicture,\r\n    category,\r\n    description,\r\n    linkto,\r\n    github,\r\n    video,\r\n    skill,\r\n    begin,\r\n    end,\r\n  } = proyecto;\r\n\r\n  const [skills, getSkills] = useState([]);\r\n\r\n  const [error, guardarError] = useState(false);\r\n\r\n  const [categorias, guardarCategorias] = useState([]);\r\n\r\n  // useEffect(() => {\r\n  //   const getData = async () => {\r\n  //     try {\r\n  //       const respuesta = await clienteAxios.get(\"/categories\");\r\n  //       guardarCategorias(respuesta.data);\r\n  //     } catch (error) {\r\n  //       console.error(error);\r\n  //     }\r\n  //   };\r\n  //   getData();\r\n\r\n  //   const getFeatures = async () => {\r\n  //     try {\r\n  //       const resultado = await clienteAxios.get(\"/skills\");\r\n  //       getSkills(resultado.data);\r\n  //     } catch (error) {\r\n  //       console.error(error);\r\n  //     }\r\n  //   };\r\n  //   getFeatures();\r\n  // }, []);\r\n\r\n  const newOne = skills.map((s, i) => ({ value: s.skills, label: s.skills }));\r\n\r\n  const [selectedValue, setSelectedValue] = useState([]);\r\n\r\n  const handleChange = (e) => {\r\n    setSelectedValue(Array.isArray(e) ? e.map((x) => x.value) : []);\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const { name, value, files, file } = e.target;\r\n    guardarProyecto({\r\n      ...proyecto,\r\n      [name]: files ? files[0] : value,\r\n    });\r\n    console.log(files && files[0]);\r\n    console.log(file);\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (\r\n      name.trim() === \"\" ||\r\n      category.trim() === \"\" ||\r\n      description.trim() === \"\" ||\r\n      begin.trim() === \"\" ||\r\n      end.trim() === \"\"\r\n    ) {\r\n      guardarError(true);\r\n\r\n      setTimeout(() => {\r\n        guardarError(false);\r\n      }, 3000);\r\n      return;\r\n    }\r\n\r\n    guardarError(false);\r\n\r\n    // Cloudinary\r\n    const data = new FormData();\r\n    data.append(\"file\", proyecto.productPicture);\r\n    data.append(\"upload_preset\", \"portfolio-aitor\");\r\n    data.append(\"cloud_name\", \"aitorcloud\");\r\n    fetch(\"https://api.cloudinary.com/v1_1/aitorcloud/image/upload\", {\r\n      method: \"post\",\r\n      body: data,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((file) => {\r\n        console.log(file.secure_url);\r\n        console.log(file);\r\n\r\n        // Agrego el producto\r\n        agregarProyecto({\r\n          name,\r\n          productPicture: file.secure_url,\r\n          category,\r\n          description,\r\n          linkto,\r\n          github,\r\n          skill: selectedValue,\r\n          video,\r\n          begin,\r\n          end,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    guardarProyecto({\r\n      name: \"\",\r\n      productPicture: \"\",\r\n      category: \"\",\r\n      description: \"\",\r\n      begin: \"\",\r\n      linto: \"\",\r\n      github: \"\",\r\n      skill: [],\r\n      video: \"\",\r\n      end: \"\",\r\n    });\r\n\r\n    console.log(proyecto);\r\n  };\r\n\r\n  return (\r\n    <div className=\"proyect-form-container\">\r\n      <div className=\"proyect-form\">\r\n        <div className=\"title-container\">\r\n          New Project<i class=\"fas fa-project-diagram\"></i>\r\n        </div>\r\n\r\n        <form onSubmit={onSubmit} encType=\"multipart/form-data\">\r\n          {error ? (\r\n            <div className=\"error-red\">Completa todos los campos</div>\r\n          ) : null}\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n              placeholder=\"nombre\"\r\n              value={name}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <label class=\"custom-file-upload\">\r\n              Select File <i class=\"far fa-file\"></i>\r\n              <input\r\n                className=\"line-form\"\r\n                type=\"file\"\r\n                name=\"productPicture\"\r\n                id=\"productPicture\"\r\n                placeholder=\"imagen\"\r\n                onChange={onChange}\r\n              />\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <select className=\"line-form\" name=\"category\" onChange={onChange}>\r\n              <option value=\"select\">Select...</option>\r\n              {categorias.map((categorySelect) => (\r\n                <option key={categorySelect.id} value={categorySelect.category}>\r\n                  {categorySelect.category}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <Select\r\n              isMulti\r\n              className=\"line-form-select\"\r\n              options={newOne}\r\n              value={newOne.filter((obj) => selectedValue.includes(obj.value))}\r\n              onChange={handleChange}\r\n            ></Select>\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"text\"\r\n              name=\"description\"\r\n              placeholder=\"descripciÃ³n\"\r\n              value={description}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"text\"\r\n              name=\"linkto\"\r\n              placeholder=\"linkto\"\r\n              value={linkto}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"text\"\r\n              name=\"github\"\r\n              placeholder=\"github\"\r\n              value={github}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"text\"\r\n              name=\"video\"\r\n              placeholder=\"video\"\r\n              value={video}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"date\"\r\n              name=\"begin\"\r\n              placeholder=\"incicio\"\r\n              value={begin}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"cajetin-form\">\r\n            <input\r\n              className=\"line-form\"\r\n              type=\"date\"\r\n              name=\"end\"\r\n              placeholder=\"finalizado\"\r\n              value={end}\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n\r\n          <button className=\"form-button\" type=\"submit\" value=\"Subir Proyecto\">\r\n            <i class=\"fas fa-arrow-circle-up\" alt=\"upload project\"></i>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}